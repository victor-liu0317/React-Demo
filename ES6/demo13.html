<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>demo13</title>
	<script type="text/javascript" src="node_modules/babel-core/browser.min.js"></script>
</head>
<body>
	<script type="text/javascript">
		//Promise
		//对象状态不受外界影响，3种状态:Pending(进行中)、Resolved(已完成)、Rejected(已失败)
		var promise = new Promise(function(resolve, reject){
			//...some code

			if(/*异步操作成功*/true){
				resolve(value);//value会传递给回调函数
			}else{
				reject(value);
			}
		});

		function timeout(ms){
			return new Promise((resolve, reject) => {
				setTimeout(resolve, ms, 'done');
			});
		}
		timeout(100).then((value) => {
			console.log(value);
		});

		//Promise.prototype.then()可链式调用，第一个回调函数完成后会将返回结果作为参数传入第二个回调函数
		//Promise.prototype.catch()用于指定发生错误时的回调函数

		//应用：加载图片
		const preloadImage = function(path){
			return new Promise(function(resolve, reject){
				var image = new Image();
				image.onload = resolve;
				image.onerror = reject;
				image.src = path;
			});
		};
	</script>
</body>
</html>
